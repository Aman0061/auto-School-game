# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare Images –¥–ª—è –∞–≤—Ç–æ—à–∫–æ–ª—ã

## üöÄ –û–±–∑–æ—Ä

Cloudflare Images - —ç—Ç–æ –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –û–Ω –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–≤—Ç–æ—à–∫–æ–ª—ã, —Ç–∞–∫ –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üñºÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é** (WebP, AVIF)
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üåç **–ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ —Å–µ—Ç—å Cloudflare
- üí∞ **–î–æ—Å—Ç—É–ø–Ω—É—é —Ü–µ–Ω—É** –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ Cloudflare

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [cloudflare.com](https://cloudflare.com)
2. –ù–∞–∂–º–∏—Ç–µ "Sign Up" –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email –∏ –≤–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è Cloudflare Images

1. –í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Images**
3. –ù–∞–∂–º–∏—Ç–µ **"Get started with Images"**
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω:
   - **Free**: 100,000 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–º–µ—Å—è—Ü
   - **Paid**: $5/–º–µ—Å—è—Ü –∑–∞ 100,000 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ Account Hash

1. –í —Ä–∞–∑–¥–µ–ª–µ **Images** –Ω–∞–π–¥–∏—Ç–µ **Account Hash**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫: `abc123def456ghi789`)

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `lib/config/cdn_config.dart` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:

```dart
class CDNConfig {
  // –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_ACCOUNT_HASH –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ö–µ—à
  static const String baseUrl = 'https://imagedelivery.net/YOUR_ACCOUNT_HASH/';
  
  // –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å
}
```

**–ü—Ä–∏–º–µ—Ä:**
```dart
static const String baseUrl = 'https://imagedelivery.net/abc123def456ghi789/';
```

## üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Cloudflare Dashboard

1. –í —Ä–∞–∑–¥–µ–ª–µ **Images** –Ω–∞–∂–º–∏—Ç–µ **"Upload images"**
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤–∞—à–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞)

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:

```bash
#!/bin/bash

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ curl –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
# brew install curl (macOS)
# sudo apt-get install curl (Ubuntu)

ACCOUNT_HASH="your_account_hash_here"
API_TOKEN="your_api_token_here"

# –°–æ–∑–¥–∞–π—Ç–µ API —Ç–æ–∫–µ–Ω –≤ Cloudflare Dashboard
# Images:Edit

for file in assets/images/*.jpg; do
  filename=$(basename "$file" .jpg)
  echo "Uploading $filename..."
  
  curl -X POST \
    "https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_HASH/images/v1" \
    -H "Authorization: Bearer $API_TOKEN" \
    -F "file=@$file" \
    -F "id=$filename"
    
  echo "Uploaded $filename"
done
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ Flutter (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```dart
import 'dart:io';
import 'package:http/http.dart' as http;

class CloudflareUploader {
  static const String accountHash = 'YOUR_ACCOUNT_HASH';
  static const String apiToken = 'YOUR_API_TOKEN';
  
  static Future<bool> uploadImage(File imageFile, String imageId) async {
    try {
      final url = 'https://api.cloudflare.com/client/v4/accounts/$accountHash/images/v1';
      
      final request = http.MultipartRequest('POST', Uri.parse(url))
        ..headers['Authorization'] = 'Bearer $apiToken'
        ..files.add(await http.MultipartFile.fromPath('file', imageFile.path))
        ..fields['id'] = imageId;
      
      final response = await request.send();
      return response.statusCode == 200;
    } catch (e) {
      print('Error uploading image: $e');
      return false;
    }
  }
}
```

## üéØ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
https://imagedelivery.net/YOUR_HASH/
‚îú‚îÄ‚îÄ image001.jpg
‚îú‚îÄ‚îÄ image002.jpg
‚îú‚îÄ‚îÄ image003.jpg
‚îú‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ image404.jpg
```

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:

- ‚úÖ **–•–æ—Ä–æ—à–æ**: `image001`, `image002`, `traffic_sign_001`
- ‚ùå **–ü–ª–æ—Ö–æ**: `IMG_001.JPG`, `traffic-sign-001`, `001`

## üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Cloudflare Images

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```dart
// –ë–∞–∑–æ–≤—ã–π URL
String url = CDNService.getImageUrl('image001');

// –° —Ä–∞–∑–º–µ—Ä–æ–º
String url = CDNService.getImageUrlWithSize('image001', width: 800, height: 600);

// –° –∫–∞—á–µ—Å—Ç–≤–æ–º
String url = CDNService.getImageUrlWithQuality('image001', quality: 80);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç (WebP/AVIF)
String url = CDNService.getAutoFormatUrl('image001');

// –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
String url = CDNService.getMobileOptimizedUrl('image001');

// –î–ª—è –≤–µ–±
String url = CDNService.getWebOptimizedUrl('image001');

// –î–ª—è Retina –¥–∏—Å–ø–ª–µ–µ–≤
String url = CDNService.getRetinaUrl('image001');
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Cloudflare:

- `w=800` - —à–∏—Ä–∏–Ω–∞
- `h=600` - –≤—ã—Å–æ—Ç–∞
- `q=80` - –∫–∞—á–µ—Å—Ç–≤–æ (1-100)
- `fit=crop` - —Å–ø–æ—Å–æ–± –ø–æ–¥–≥–æ–Ω–∫–∏ (crop, scale-down, pad)
- `f=auto` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç
- `f=webp` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ WebP
- `f=avif` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ AVIF

## üì± –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
```dart
CDNImage(
  imageName: CDNService.getMobileOptimizedUrl('image001'),
  width: 400,
  height: 300,
)
```

### –í–µ–±:
```dart
CDNImage(
  imageName: CDNService.getWebOptimizedUrl('image001'),
  width: 800,
  height: 600,
)
```

### Retina –¥–∏—Å–ø–ª–µ–∏:
```dart
CDNImage(
  imageName: CDNService.getRetinaUrl('image001'),
  width: 400,
  height: 300,
)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ URL:
```dart
void testCDN() {
  print('Mobile URL: ${CDNService.getMobileOptimizedUrl('image001')}');
  print('Web URL: ${CDNService.getWebOptimizedUrl('image001')}');
  print('Auto format: ${CDNService.getAutoFormatUrl('image001')}');
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
–û—Ç–∫—Ä–æ–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤:
–î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `?f=webp` –∫ URL, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å WebP –ø–æ–¥–¥–µ—Ä–∂–∫—É.

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### Free –ø–ª–∞–Ω:
- 100,000 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–º–µ—Å—è—Ü
- 100,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü
- –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### Paid –ø–ª–∞–Ω ($5/–º–µ—Å—è—Ü):
- 100,000 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–º–µ—Å—è—Ü
- 1,000,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## üö® Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Account Hash –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Cloudflare
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–∑–º–µ—Ä–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç (`f=auto`)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ 80-85 –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ Cloudflare

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ 404

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Account Hash
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞:
```dart
// –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
class SecureCDNService {
  static String getSecureImageUrl(String imageName, String userToken) {
    final baseUrl = CDNService.getImageUrl(imageName);
    return '$baseUrl&token=$userToken';
  }
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è URL:
```dart
bool isValidImageUrl(String url) {
  return url.startsWith('https://imagedelivery.net/') && 
         url.contains('YOUR_ACCOUNT_HASH');
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í Cloudflare Dashboard:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –û–±—ä–µ–º —Ç—Ä–∞—Ñ–∏–∫–∞
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å CDN
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

### –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
```dart
CDNImage(
  imageName: 'image001',
  onImageLoaded: () => print('Image loaded successfully'),
  errorWidget: (context, url, error) {
    print('Failed to load image: $error');
    return Icon(Icons.error);
  },
)
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Cloudflare Images –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—É—é –∏ –¥–æ—Å—Ç—É–ø–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–≤—Ç–æ—à–∫–æ–ª—ã. –°–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç Cloudflare
2. ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ Images
3. ‚úÖ –ü–æ–ª—É—á–∏—Ç–µ Account Hash
4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
5. ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
6. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É

–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Cloudflare Images](https://developers.cloudflare.com/images/).
